{% macro render_table(obj, classes="table table-striped") %}
<style>
.table {
  border-collapse: collapse;
  border: 1px solid #999;
  width: 100%;
  font-size: 15px;
  margin-top: 10px;
}
.table th, .table td {
  border: 1px solid #999;
  padding: 8px 12px;
}
.table th {
  background-color: #f7f7f7;
  font-weight: bold;
}
.table thead th {
  border-bottom: 2px solid #999;
  text-align: center;
}
.table-striped tbody tr:nth-child(odd) {
  background-color: #f9f9f9;
}
.table tbody th {
  text-align: left;
}
.table tbody td {
  text-align: right;
}
</style>

{% if obj is mapping and obj.values()|first is mapping %}
  {% set outer_headers = obj.keys()|list %}
  {% set first_inner = obj.values()|first %}
  {% set inner_rows = first_inner.keys()|list %}


  <table class="{{ classes }}">
    <thead>
      <tr>
        <th></th>
        {% for h in outer_headers %}
          <th>{{ h }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row_name in inner_rows %}
        <tr>
          <th>{{ row_name }}</th>
          {% for outer_key in outer_headers %}
            <td>{{ obj[outer_key][row_name] }}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>

{% else %}
  <table class="{{ classes }}">
    <thead>
      <tr><th>Key</th><th>Value</th></tr>
    </thead>
    <tbody>
      {% for k, v in obj.items() %}
        <tr><th>{{ k }}</th><td>{{ v }}</td></tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}
{% endmacro %}
